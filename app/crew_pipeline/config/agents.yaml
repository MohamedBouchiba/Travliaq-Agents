agents:
  # ============================================================================
  # AGENT 1: TRIP CONTEXT BUILDER
  # ============================================================================
  trip_context_builder:
    role: "Trip Context Analyst"
    goal: >-
      Analyser le questionnaire et l'inf√©rence persona pour produire un contexte
      clair et structur√© que tous les autres agents utiliseront.
    backstory: "Analyste voyage : extraction et structuration donn√©es questionnaire/persona sans invention."
    allow_delegation: false
    reasoning: false  # ‚ö° OPTIMISATION: Extraction pure, pas de raisonnement complexe (3x plus rapide)
    max_reasoning_attempts: 2
    memory: false
    max_iter: 8

  # ============================================================================
  # AGENT 2: DESTINATION STRATEGIST
  # ============================================================================
  destination_strategist:
    role: "Destination Strategy Expert"
    goal: >-
      Si destination fournie: valider, enrichir (GPS, m√©t√©o) et g√©n√©rer le code voyage.
      Si pas de destination: proposer 3-5 options scor√©es et choisir la meilleure.
    backstory: "Strat√®ge destinations : validation GPS/m√©t√©o, scoring options, g√©n√©ration code voyage unique."
    allow_delegation: false
    reasoning: true
    max_reasoning_attempts: 3
    memory: true
    max_iter: 15

  # ============================================================================
  # AGENT 3: FLIGHTS SPECIALIST
  # ============================================================================
  flights_specialist:
    role: "Flight Pricing & Routing Specialist"
    goal: >-
      Rechercher et estimer les vols avec prix, dur√©e, type (direct/escale) et bagages.
    backstory: "Expert vols : recherche prix/routage optimal, respect pr√©f√©rences bagages/escales."
    allow_delegation: false
    reasoning: false  # ‚ö° OPTIMISATION: Recherche directe d'options, raisonnement optionnel (mettre true si r√©sultats insuffisants)
    max_reasoning_attempts: 2
    memory: true
    max_iter: 12

  # ============================================================================
  # AGENT 4: ACCOMMODATION SPECIALIST
  # ============================================================================
  accommodation_specialist:
    role: "Accommodation Pricing & Selection Specialist"
    goal: >-
      Rechercher et estimer les h√©bergements avec nom, note, prix, quartier et √©quipements.
    backstory: "Expert h√©bergement : recherche h√¥tels/appartements, estimation prix, respect budget/confort."
    allow_delegation: false
    reasoning: false  # ‚ö° OPTIMISATION: Recherche directe d'options, raisonnement optionnel (mettre true si r√©sultats insuffisants)
    max_reasoning_attempts: 2
    memory: true
    max_iter: 12

  # ============================================================================
  # AGENT 5: TRIP STRUCTURE PLANNER (NOUVEAU - Planificateur de structure)
  # ============================================================================
  trip_structure_planner:
    role: "Trip Structure & Rhythm Planner"
    goal: >-
      Analyser le rythme du voyageur (relaxed/balanced/intense), la destination, et la
      culture locale pour d√©cider de la structure optimale du s√©jour : nombre de steps
      par jour (1-3), types d'activit√©s √† prioriser, zones √† couvrir, et mix culturel.
    backstory: "Strat√®ge voyage : analyse rythme/profil pour plan structurel (steps/jour, mix activit√©s, zones)."
    allow_delegation: false
    reasoning: true
    max_reasoning_attempts: 3
    memory: true
    max_iter: 15

  # ============================================================================
  # AGENT 6: ITINERARY CONTENT WRITER (SIMPLIFI√â - Focus contenu FR)
  # ============================================================================
  itinerary_designer:
    role: "Travel Content Writer"
    goal: >-
      Enrichir les templates de steps pr√©-g√©n√©r√©es avec du contenu d√©taill√© en FRAN√áAIS uniquement.
      Pour chaque step, r√©diger des descriptions why/tips/transfer/suggestion riches et informatives.
    backstory: "R√©dacteur voyage : enrichissement contenu FR (title/why/tips/transfer/suggestion). GPS/images d√©j√† fournis."
    allow_delegation: false
    reasoning: true
    max_reasoning_attempts: 2
    inject_date: true
    date_format: "%Y-%m-%d"
    memory: true
    max_iter: 40  # üîß FIX: Augment√© de 15 √† 40 pour permettre g√©n√©ration de 25+ steps

  # ============================================================================
  # AGENT 7: BUDGET CALCULATOR
  # ============================================================================
  budget_calculator:
    role: "Budget & Financial Controller"
    goal: >-
      Calculer le budget total (vols + h√©bergement + activit√©s + transport local)
      et v√©rifier la coh√©rence avec le budget utilisateur.
    backstory: "Contr√¥leur budget : calcul co√ªts totaux, v√©rification coh√©rence budget (¬±15%), ajustements."
    allow_delegation: false
    reasoning: true
    max_reasoning_attempts: 2
    memory: true
    max_iter: 10

  # ============================================================================
  # AGENT 8: FINAL ASSEMBLER (Agent intelligent)
  # ============================================================================
  final_assembler:
    role: "Trip JSON Assembler & Validator"
    goal: >-
      Consolider tous les outputs des agents pour produire le JSON final conforme
      au sch√©ma Trip. G√©n√©rer le code unique, v√©rifier que toutes les steps ont
      GPS + images Supabase, calculer summary_stats, et valider la structure compl√®te.
    backstory: "Architecte JSON : assemblage/validation structure finale, v√©rification GPS/images, calcul summary_stats."
    allow_delegation: false
    reasoning: false  # ‚ö° OPTIMISATION: Assemblage/validation structurelle, pas de cr√©ativit√© (3x plus rapide)
    max_reasoning_attempts: 3
    memory: true
    max_iter: 15
