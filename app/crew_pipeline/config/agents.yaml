agents:
  # ============================================================================
  # AGENT 1: TRIP CONTEXT BUILDER
  # ============================================================================
  trip_context_builder:
    role: "Trip Context Analyst"
    goal: >-
      Analyser le questionnaire et l'inférence persona pour produire un contexte
      clair et structuré que tous les autres agents utiliseront.
    backstory: "Analyste voyage : extraction et structuration données questionnaire/persona sans invention."
    allow_delegation: false
    reasoning: false  # ⚡ OPTIMISATION: Extraction pure, pas de raisonnement complexe (3x plus rapide)
    max_reasoning_attempts: 2
    memory: false
    max_iter: 8

  # ============================================================================
  # AGENT 2: DESTINATION STRATEGIST
  # ============================================================================
  destination_strategist:
    role: "Destination Strategy Expert"
    goal: >-
      Si destination fournie: valider, enrichir (GPS, météo) et générer le code voyage.
      Si pas de destination: proposer 3-5 options scorées et choisir la meilleure.
    backstory: "Stratège destinations : validation GPS/météo, scoring options, génération code voyage unique."
    allow_delegation: false
    reasoning: true
    max_reasoning_attempts: 3
    memory: true
    max_iter: 15

  # ============================================================================
  # AGENT 3: FLIGHTS SPECIALIST
  # ============================================================================
  flights_specialist:
    role: "Flight Pricing & Routing Specialist"
    goal: >-
      Rechercher et estimer les vols avec prix, durée, type (direct/escale) et bagages.
    backstory: "Expert vols : recherche prix/routage optimal, respect préférences bagages/escales."
    allow_delegation: false
    reasoning: false  # ⚡ OPTIMISATION: Recherche directe d'options, raisonnement optionnel (mettre true si résultats insuffisants)
    max_reasoning_attempts: 2
    memory: true
    max_iter: 12

  # ============================================================================
  # AGENT 4: ACCOMMODATION SPECIALIST
  # ============================================================================
  accommodation_specialist:
    role: "Accommodation Pricing & Selection Specialist"
    goal: >-
      Rechercher et estimer les hébergements avec nom, note, prix, quartier et équipements.
    backstory: "Expert hébergement : recherche hôtels/appartements, estimation prix, respect budget/confort."
    allow_delegation: false
    reasoning: false  # ⚡ OPTIMISATION: Recherche directe d'options, raisonnement optionnel (mettre true si résultats insuffisants)
    max_reasoning_attempts: 2
    memory: true
    max_iter: 12

  # ============================================================================
  # AGENT 5: TRIP STRUCTURE PLANNER (NOUVEAU - Planificateur de structure)
  # ============================================================================
  trip_structure_planner:
    role: "Trip Structure & Rhythm Planner"
    goal: >-
      Analyser le rythme du voyageur (relaxed/balanced/intense), la destination, et la
      culture locale pour décider de la structure optimale du séjour : nombre de steps
      par jour (1-3), types d'activités à prioriser, zones à couvrir, et mix culturel.
    backstory: "Stratège voyage : analyse rythme/profil pour plan structurel (steps/jour, mix activités, zones)."
    allow_delegation: false
    reasoning: true
    max_reasoning_attempts: 3
    memory: true
    max_iter: 15

  # ============================================================================
  # AGENT 6: ITINERARY CONTENT WRITER (SIMPLIFIÉ - Focus contenu FR)
  # ============================================================================
  itinerary_designer:
    role: "Travel Content Writer"
    goal: >-
      Enrichir les templates de steps pré-générées avec du contenu détaillé en FRANÇAIS uniquement.
      Pour chaque step, rédiger des descriptions why/tips/transfer/suggestion riches et informatives.
    backstory: "Rédacteur voyage : enrichissement contenu FR (title/why/tips/transfer/suggestion). GPS/images déjà fournis."
    allow_delegation: false
    reasoning: true
    max_reasoning_attempts: 2
    inject_date: true
    date_format: "%Y-%m-%d"
    memory: true
    max_iter: 15

  # ============================================================================
  # AGENT 7: BUDGET CALCULATOR
  # ============================================================================
  budget_calculator:
    role: "Budget & Financial Controller"
    goal: >-
      Calculer le budget total (vols + hébergement + activités + transport local)
      et vérifier la cohérence avec le budget utilisateur.
    backstory: "Contrôleur budget : calcul coûts totaux, vérification cohérence budget (±15%), ajustements."
    allow_delegation: false
    reasoning: true
    max_reasoning_attempts: 2
    memory: true
    max_iter: 10

  # ============================================================================
  # AGENT 8: FINAL ASSEMBLER (Agent intelligent)
  # ============================================================================
  final_assembler:
    role: "Trip JSON Assembler & Validator"
    goal: >-
      Consolider tous les outputs des agents pour produire le JSON final conforme
      au schéma Trip. Générer le code unique, vérifier que toutes les steps ont
      GPS + images Supabase, calculer summary_stats, et valider la structure complète.
    backstory: "Architecte JSON : assemblage/validation structure finale, vérification GPS/images, calcul summary_stats."
    allow_delegation: false
    reasoning: false  # ⚡ OPTIMISATION: Assemblage/validation structurelle, pas de créativité (3x plus rapide)
    max_reasoning_attempts: 3
    memory: true
    max_iter: 15
